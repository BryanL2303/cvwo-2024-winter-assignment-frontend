"use strict";(self.webpackChunkcvwo_2024_winter_assignment_frontend=self.webpackChunkcvwo_2024_winter_assignment_frontend||[]).push([[812],{812:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var l=s(791),a=s(294),n=s(600),r=s(844),o=s(352),i=s(630),d=s(184);function c(e){if(!("value"in e))throw new Error("Element is not a form field element")}const u=function(e){let{post:t}=e;const[s]=(0,n.Z)(["token"]),[u]=(0,l.useContext)(o.i),[f,x]=(0,l.useState)(!1);return console.log(t),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("br",{}),!f&&(0,d.jsx)(i.default,{onClick:()=>{x(!0)},children:"Edit Post"})]}),f&&(0,d.jsxs)("form",{className:"z-40 h-full w-full absolute top-0 left-0 bg-gray-100 mx-20",onSubmit:function(e){e.preventDefault();const l=e.currentTarget[1],n=e.currentTarget[2],r=e.currentTarget[3];c(l),function(e){if(!("value"in e))throw new Error("Element is not a form field element")}(n),c(r);var o=[];for(let t=0;t<n.selectedOptions.length;t++)o=[...o,n.selectedOptions[t].id];const i={id:t.id,token:s.token,title:l.value,labels:o,description:r.value};console.log(i),a.Z.post("/update_post",i).then((e=>{0===e.data.status?(alert("Post saved!"),window.location.href="/post/"+e.data.post.id):1===e.data.status?alert("Please relog in before trying again."):alert("There was a problem creating the post, please try again")})).catch((e=>console.log(e)))},children:[(0,d.jsxs)("h1",{className:"font-bold",children:[(0,d.jsx)(i.default,{type:"button",onClick:()=>{x(!1)},children:(0,d.jsx)(r.Z,{})})," Editing Post"]}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("label",{className:"w-auto",children:"Title: "}),(0,d.jsx)("input",{type:"text",className:"border border-slate-400",defaultValue:t.title}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("label",{children:"Categories: "}),(0,d.jsx)("select",{multiple:!0,className:"flex",defaultValue:t.labels,children:u.map((e=>(0,d.jsx)("option",{id:e.id,value:e.id,children:e.label_name},e.id)))}),(0,d.jsx)("br",{}),(0,d.jsx)("label",{className:"w-auto",children:"Post: "}),(0,d.jsx)("br",{}),(0,d.jsx)("textarea",{className:"border border-slate-400 w-3/4 h-40 p-1",style:{resize:"none"},defaultValue:t.description}),!1,(0,d.jsx)("br",{}),(0,d.jsx)(i.default,{className:"self-end",style:{transform:"translateX(65vw)"},children:"Save Edit"})]})]})}}}]);
//# sourceMappingURL=812.4e453bf4.chunk.js.map