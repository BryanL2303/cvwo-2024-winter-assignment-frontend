{"version":3,"file":"static/js/356.c536849d.chunk.js","mappings":"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","sources":["components/CommentCreationForm.tsx","components/Comment.tsx","components/CommentContainer.tsx","pages/PostPage.tsx"],"sourcesContent":["import React, { ComponentProps, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useCookies } from 'react-cookie';\r\n\r\nimport Button from './Button';\r\n\r\nfunction assertIsFormFieldElement(element: Element): asserts element is HTMLInputElement | HTMLSelectElement | HTMLButtonElement {\r\n    // Customize this list as necessary −−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    if (!(\"value\" in element)) {\r\n        throw new Error(`Element is not a form field element`);\r\n    }\r\n}\r\n\r\nfunction assertIsSelectElement(element: Element): asserts element is HTMLSelectElement {\r\n    // Customize this list as necessary −−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−−^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n    if (!(\"value\" in element)) {\r\n        throw new Error(`Element is not a form field element`);\r\n    }\r\n}\r\n\r\ntype CommentCreationFormProps = { variant: string, id: string, post_id?:string } & ComponentProps<\"div\">\r\n\r\nfunction CommentCreationForm({ variant, id, post_id=\"0\" }: CommentCreationFormProps) {\r\n    const [cookies] = useCookies(['token']);\r\n    const [showFields, setShowFields] = useState(false);\r\n    \r\n    function createComment(e: React.FormEvent<HTMLFormElement>) {\r\n        e.preventDefault();\r\n        const comment = e.currentTarget[0];\r\n        assertIsFormFieldElement(comment);\r\n\r\n        const payload = {\r\n            token: cookies.token,\r\n            comment: comment.value,\r\n            variant: variant,\r\n            id: id,\r\n            post_id: post_id,\r\n        }\r\n\r\n        axios.post('/post_comment', payload)\r\n        .then(resp => {\r\n            if (resp.data.status === 0) {\r\n                alert(\"Comment posted!\")\r\n            } else if (resp.data.status === 1) {\r\n                alert(\"Please relog in before trying again.\")\r\n            } else {\r\n                if (resp.data.error.comment.length > 0) {\r\n                    alert(\"Comment \" + resp.data.error.comment)\r\n                } else {\r\n                    alert(\"An unexpected error has occured, please refresh the page and try again\")\r\n                }\r\n            }\r\n        })\r\n        .catch(resp => console.log(resp))\r\n    }\r\n\r\n    return (<div className=\"w-11/12 mx-1 h-auto flex-col\">\r\n        <form className=\"h-auto w=auto\" onSubmit={createComment}>\r\n            <input type='text' className=\"border border-slate-400\" placeholder='Add a comment' onFocus={() => setShowFields(true)}/>\r\n            {showFields && <div>\r\n                <Button className=\"self-end\" style={{transform: `translateX(50vw)`}} onClick={() => setShowFields(false)}>Cancel</Button>\r\n                <Button className=\"self-end\" style={{transform: `translateX(50vw)`}}>Comment</Button>\r\n            </div>}\r\n        </form>\r\n    </div>)\r\n}\r\n\r\nexport default CommentCreationForm;","import { useState, lazy, Suspense } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport axios from 'axios';\r\n\r\n//import Button from './Button';\r\nimport CommentCreationForm from './CommentCreationForm';\r\nimport CommentContainer from './CommentContainer'\r\n//import CommentEditor from './CommentEditor';\r\n\r\nconst Button = lazy(() => import('./Button'))\r\nconst CommentEditor = lazy(() => import('./CommentEditor'))\r\n\r\ntype CommentProp = {\r\n    id: string,\r\n    comment: string,\r\n    date: string,\r\n    parent_comment_id: string,\r\n    post_id: string,\r\n    user_id: string,\r\n    author: string,\r\n    hasChild: boolean,\r\n}\r\n\r\nfunction Comment({ id, comment, date, parent_comment_id, post_id, user_id, author }: CommentProp) {\r\n    const [cookies] = useCookies(['token', 'username']);\r\n    const [hasChild] = useState<{[key:string]: boolean}>({});\r\n    const loggedIn = (cookies.token != null);\r\n\r\n    function deleteComment() {\r\n        axios.post('/delete_comment', {\r\n            id: id,\r\n            token: cookies.token,\r\n        })\r\n        .then(resp => {\r\n            if (resp.data.status === 0) {\r\n                alert(\"Comment deleted!\")\r\n                window.location.href = '/'\r\n            } else {\r\n                alert(\"Error, please try relogging in before trying again.\")\r\n            }\r\n        })\r\n        .catch(resp => console.log(resp))\r\n    }\r\n\r\n    return (<div id=\"1\" className=\"w-128 h-auto border-l border-gray-500 flex justify-between\">\r\n        <div className=\"h-auto flex-col justify-between\">\r\n            <div className=\"h-10 flex overflow-y-hidden justify-between\">\r\n                <label>{comment}</label>\r\n            </div>\r\n            <div className=\"h-10 flex justify-between\">\r\n                <p>{date} -{author}</p>\r\n                {cookies.username === author && <Suspense>\r\n                        <CommentEditor id={id} comment={comment}/>\r\n                        <Button onClick={deleteComment}>Delete Comment</Button>\r\n                    </Suspense>}\r\n            </div>\r\n            {loggedIn && <CommentCreationForm variant=\"comment\" id={id}/>}\r\n            {hasChild && <CommentContainer variant=\"comment\" id={id}/>}\r\n        </div>\r\n    </div>)\r\n}\r\n\r\nexport default Comment;","import { ComponentProps, useEffect, useState } from \"react\";\r\nimport { useCookies } from 'react-cookie';\r\nimport axios from 'axios';\r\n\r\nimport Comment from './Comment';\r\nimport CommentCreationForm from './CommentCreationForm';\r\n\r\ntype CommentContainerProps = {\r\n    variant: string,\r\n    id: string\r\n} & ComponentProps<\"div\">\r\n\r\nconst CommentProp = {\r\n    id: \"0\",\r\n    title: \"Backend returned title\",\r\n    labels: [\"Game\", \"Entertainment\"],\r\n    description: \"Backend returned description\",\r\n    date: \"23 December 2023\",\r\n    author: \"Administrator\",\r\n    user_id: \"1\",\r\n    label_id: \"1\",\r\n    created_at: \"\",\r\n    updated_at: \"\"\r\n}\r\n\r\nfunction CommentContainer({ variant, id, ...props }: CommentContainerProps) {\r\n    const [cookies] = useCookies(['token']);\r\n    const [hasChild, setHasChild] = useState<{[key:string]: boolean}>({});\r\n    const loggedIn = (cookies.token != null);\r\n    type comment = {\r\n        id: string,\r\n        comment: string,\r\n        date: string,\r\n        parent_comment_id: string,\r\n        post_id: string,\r\n        user_id: string,\r\n        author: string,\r\n    }\r\n    const [comments, setComments] = useState<comment[]>([])\r\n\r\n    useEffect(() => {\r\n        axios.post('/get_comments', {variant: variant, id: id})\r\n        .then(resp => {\r\n            if (resp.data.status === 0) {\r\n                setComments(resp.data.comments)\r\n                setHasChild(resp.data.hasChild)\r\n            }\r\n        })\r\n        .catch(resp => console.log(resp))\r\n    }, [])\r\n\r\n    return <div {...props} className=\"w-128 h-auto m-5 space-y-1 flex-col\">\r\n        {loggedIn && variant == \"post\" && <CommentCreationForm variant={variant} id={id} />}\r\n        {Array.isArray(comments) && comments.map((comment: comment) => {\r\n            return <Comment id={comment.id} \r\n            key={comment.id} \r\n            comment={comment.comment} \r\n            date={comment.date} \r\n            parent_comment_id={comment.parent_comment_id}\r\n            post_id={comment.post_id}\r\n            user_id={comment.user_id}\r\n            author={comment.author} \r\n            hasChild={hasChild[comment.id]}/>\r\n        })}\r\n    </div>\r\n}\r\n\r\nexport default CommentContainer;","import { useState, useEffect, lazy, Suspense } from 'react';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useParams } from 'react-router-dom';\r\nimport { ArrowLeft } from 'lucide-react';\r\nimport axios from 'axios';\r\n\r\nimport NavBar from '../components/NavBar';\r\nimport Button from '../components/Button';\r\nimport CommentContainer from '../components/CommentContainer'\r\n//import PostEditor from '../components/PostEditor'\r\n\r\nconst PostEditor = lazy(() => import('../components/PostEditor'))\r\n\r\ntype postprop = {id: string, title: string, description: string, author: string, date:string, labels: string[]}\r\n\r\nfunction PostPage() {\r\n    const [cookies, setCookie, removeCookie] = useCookies(['token', 'username']);\r\n    const params = useParams();    \r\n    const [post, setPost] = useState<postprop>({id: \"0\", title: \"Fetching post\", description: \"\", author: \"\", date: \"\", labels: []})\r\n\r\n    useEffect(() => {\r\n        if (params['id'] != null) {\r\n            fetchPost(params['id']);\r\n        } else window.location.href = '/';\r\n    }, [params['id']])\r\n\r\n    /**\r\n     * Make fetch request to back end to get information of the post\r\n     * \r\n     * Post to backend with:\r\n     * id: int\r\n     * \r\n     * Backend will respond with the following:\r\n     * status:\r\n     * 0 - success\r\n     * 1 - id no longer exists\r\n     * 2 - unable to interact with database\r\n     */\r\n    function fetchPost(id: string) {\r\n        axios.post('/get_post', {id: id})\r\n        .then(resp => {\r\n            if (resp.data.status === 0) {\r\n                setPost({...resp.data.post, labels: resp.data.labels})\r\n            } else {\r\n                alert(\"Error fetching post, going back to main page\")\r\n                window.location.href = '/'\r\n            }\r\n        })\r\n        .catch(resp => console.log(resp))\r\n    }\r\n\r\n    function deletePost() {\r\n        axios.post('/delete_post', {\r\n            id: params['id'],\r\n            token: cookies.token,\r\n        })\r\n        .then(resp => {\r\n            if (resp.data.status === 0) {\r\n                alert(\"Post deleted!\")\r\n                window.location.href = '/'\r\n            } else {\r\n                alert(\"Error, please try relogging in before trying again.\")\r\n            }\r\n        })\r\n        .catch(resp => console.log(resp))\r\n    }\r\n\r\n    return (<div className=\"top-0 left-0 h-screen w-128 mx-20 overflow-y-hidden\">\r\n        <NavBar />\r\n        <div className=\"mx-10 my-10 h-3/4 flex-col bg-gray-100 bg-opacity-100 overflow-x-hidden\">\r\n            <div className=\"flex\">\r\n                <Button onClick={() => {\r\n                    window.location.href = '/'\r\n                }}>\r\n                    <ArrowLeft />\r\n                </Button>\r\n                <h1 className=\"ml-10 font-bold\">{post.title}</h1>            \r\n            </div>\r\n            <div className=\"flex-col\">\r\n                <label>{post.description}</label>\r\n                <br/>\r\n                <br/>\r\n                <label>- {post.author}</label>\r\n                {cookies.username === post.author && <Suspense fallback={<h1>Loading Form...</h1>}>\r\n                        <PostEditor post={post}/>\r\n                    </Suspense>}\r\n                <br/>\r\n                {cookies.username === post.author && <Button onClick={deletePost}>Delete Post</Button>}\r\n                <br/>\r\n                <br/>\r\n            </div>\r\n            <div>\r\n                <h3 className=\"font-bold\">Comments</h3>\r\n                {params[\"id\"] != null && <CommentContainer variant=\"post\" id={params['id']}/>}            \r\n            </div>\r\n        </div>            \r\n    </div>\r\n    )\r\n}\r\n\r\nexport default PostPage;"],"names":["_ref","variant","id","post_id","cookies","useCookies","showFields","setShowFields","useState","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","comment","currentTarget","element","Error","assertIsFormFieldElement","payload","token","value","axios","post","then","resp","data","status","alert","error","length","catch","console","log","type","placeholder","onFocus","Button","style","transform","onClick","lazy","CommentEditor","date","parent_comment_id","user_id","author","hasChild","loggedIn","username","Suspense","window","location","href","CommentCreationForm","CommentContainer","props","setHasChild","comments","setComments","useEffect","Array","isArray","map","Comment","PostEditor","setCookie","removeCookie","params","useParams","setPost","title","description","labels","NavBar","ArrowLeft","fallback"],"sourceRoot":""}